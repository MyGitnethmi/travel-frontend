<h2 style="font-weight: 500; font-size: 24px" class="my-3">Link Google account</h2>

<p class="text-secondary">We will switch your authentication method from email address to Google. Your credentials and personal information willa be managed by Google.</p>

<div class="message message-warning mx-0">
  <mat-icon class="message-icon message-icon-warning">warning</mat-icon> Please verify your identity by entering the password to your account.
</div>

<form [formGroup]="googleLinkForm" (ngSubmit)="linkGoogleAccount()">

  <mat-form-field appearance="outline" class="col-12 mx-0 my-3">
    <mat-label>Email</mat-label>
    <input type="text" matInput readonly autocomplete="email" formControlName="username" style="cursor: not-allowed"/>
    <mat-hint>This is the Google email we've matched to your account.</mat-hint>
  </mat-form-field>

  <mat-form-field appearance="outline" class="col-12 mx-0">
    <mat-label>Password</mat-label>
    <input matInput [attr.type]="passwordVisible ? 'text' : 'password'" autocomplete="current-password" formControlName="password"/>
    <button type="button" matSuffix mat-icon-button *ngIf="password?.value" (click)="passwordVisible = !passwordVisible">
      <mat-icon *ngIf="passwordVisible">visibility_off</mat-icon>
      <mat-icon *ngIf="!passwordVisible">visibility</mat-icon>
    </button>
    <mat-error *ngIf="password && password.touched && password.errors?.required">Please enter the password.</mat-error>
  </mat-form-field>

  <div *ngIf="error" class="message message-error mb-3">
    <mat-icon class="message-icon message-icon-error">error</mat-icon> {{ error }}
  </div>

  <div class="row mb-3 mx-0">
    <button type="submit" style="display: flex; flex-direction: row;" class="btn btn-primary w-100 p-0">
      <img style="width: 40px; height: 40px; background: white; margin: 2px 1px 1px 1px" class="rounded-1" src="assets/images/google-icon.png" alt="Google" />
      <span style="line-height: 40px; text-align: center" class="w-100">
        <span *ngIf="progress" class="spinner-border spinner-border-sm"></span>&nbsp;&nbsp;<b>Log in with Google</b>
      </span>
    </button>
  </div>

</form>

<div class="row mb-3 mx-0">
  <button routerLink="../login" class="btn btn-light w-100">Return to Login</button>
</div>
